"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[978],{8598:function(t,e,n){function c(t){return{all:t=t||new Map,on:function(e,n){var c=t.get(e);c?c.push(n):t.set(e,[n])},off:function(e,n){var c=t.get(e);c&&(n?c.splice(c.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var c=t.get(e);c&&c.slice().map((function(t){t(n)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,n)}))}}}n.d(e,{Z:function(){return a}});const r=c();var a=r},6852:function(t,e,n){n.d(e,{Z:function(){return m}});var c=n(3396),r=n(7139);const a={class:"header"};function i(t,e,n,i,l,o){const s=(0,c.up)("van-icon");return(0,c.wg)(),(0,c.iD)("div",a,[(0,c.Wm)(s,{name:"arrow-left",class:"icon",onClick:i.toBack},null,8,["onClick"]),(0,c._)("div",null,(0,r.zw)(n.title),1),n.edit?((0,c.wg)(),(0,c.iD)("div",{key:0,class:"edit",onClick:e[0]||(e[0]=(...t)=>i.editClick&&i.editClick(...t))},(0,r.zw)(i.store.state.edit?"編輯":"完成"),1)):(0,c.kq)("",!0)])}n(6743);var l=n(4691),o=n(678),s=n(8598),u=n(65),d={props:["title","edit"],setup(){const t=(0,u.oR)(),e=(0,o.tv)(),n=()=>{e.back()},c=()=>{t.state.cartList.length?(t.commit("EDIT"),s.Z.emit("edit")):l.Z.fail("購物車空空如也")};return{toBack:n,editClick:c,store:t}}},p=n(89);const f=(0,p.Z)(d,[["render",i],["__scopeId","data-v-ffabb4a8"]]);var m=f},9978:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var c=n(3396),r=n(7139);const a=t=>((0,c.dD)("data-v-7b12e463"),t=t(),(0,c.Cn)(),t),i={class:"create_order"},l={class:"content"},o={class:"pay-wrap"},s={class:"price"},u=a((()=>(0,c._)("span",null,"商品金額",-1))),d=(0,c.Uk)(" 生成訂單 ");function p(t,e,n,a,p,f){const m=(0,c.up)("Header"),v=(0,c.up)("van-contact-card"),k=(0,c.up)("van-card"),C=(0,c.up)("van-button");return(0,c.wg)(),(0,c.iD)("div",i,[(0,c.Wm)(m,{title:"生成訂單"}),(0,c.Wm)(v,{type:"edit",name:t.currentContact.name,tel:t.currentContact.tel,onClick:a.onEdit},null,8,["name","tel","onClick"]),(0,c._)("div",l,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(a.store.state.orderList,(t=>((0,c.wg)(),(0,c.iD)("div",{key:t},[(0,c.Wm)(k,{num:t.num,price:t.price,title:t.title,thumb:t.pic},null,8,["num","price","title","thumb"])])))),128))]),(0,c._)("div",o,[(0,c._)("div",s,[u,(0,c._)("span",null,"￥"+(0,r.zw)(t.allPrice),1)]),(0,c.Wm)(C,{class:"pay-btn",type:"primary",onClick:a.handleCreateOrder,color:"#ffc400",block:""},{default:(0,c.w5)((()=>[d])),_:1},8,["onClick"])])])}n(9905);var f=n(9636),m=(n(6699),n(6852)),v=n(4870),k=n(65),C=n(678),h={components:{Header:m.Z},setup(){const t=(0,k.oR)(),e=(0,C.tv)(),n=(0,C.yj)();let r=(0,v.qj)({currentContact:{name:"",tel:""},allPrice:0});const a=()=>{t.state.userAddress.forEach((t=>{t.isDefault&&(r.currentContact.name=t.name,r.currentContact.tel=t.tel)}))},i=()=>{let e=0;t.state.orderList.length&&(t.state.orderList.forEach((t=>{e+=t.num*t.price})),r.allPrice=e)};(0,c.bv)((()=>{i(),a()}));const l=()=>{e.push("./address")},o=()=>{f.Z.alert({title:"提示",message:"恭喜！您的訂單已完成"}).then((()=>{let c=t.state.cartList.filter((t=>!n.query.list.includes(t.id+"")));t.commit("DELETE",c),t.commit("UPDATEORDER"),e.push("./order")}))};return{...(0,v.BK)(r),onEdit:l,store:t,handleCreateOrder:o}}},w=n(89);const _=(0,w.Z)(h,[["render",p],["__scopeId","data-v-7b12e463"]]);var b=_}}]);
//# sourceMappingURL=978.3dbe934c.js.map