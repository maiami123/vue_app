"use strict";(self["webpackChunkvue_app"]=self["webpackChunkvue_app"]||[]).push([[449],{8598:function(t,e,n){function a(t){return{all:t=t||new Map,on:function(e,n){var a=t.get(e);a?a.push(n):t.set(e,[n])},off:function(e,n){var a=t.get(e);a&&(n?a.splice(a.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var a=t.get(e);a&&a.slice().map((function(t){t(n)})),(a=t.get("*"))&&a.slice().map((function(t){t(e,n)}))}}}n.d(e,{Z:function(){return o}});const i=a();var o=i},4893:function(t,e,n){n.d(e,{Z:function(){return p}});var a=n(3396),i=n(7139);const o={class:"content_item"},c={class:"left"},l=["src"],s={class:"text"},d={class:"title"},r={class:"price"};function u(t,e,n,u,m,v){const f=(0,a.up)("van-checkbox"),p=(0,a.up)("van-icon"),k=(0,a.up)("van-stepper");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",c,[n.showCheckbox?((0,a.wg)(),(0,a.j4)(f,{key:0,name:n.item.id,"checked-color":"red"},null,8,["name"])):(0,a.kq)("",!0),(0,a._)("img",{src:n.item.pic},null,8,l),(0,a._)("div",s,[(0,a._)("div",d,(0,i.zw)(n.item.title),1),n.item.add&&n.showAdd?((0,a.wg)(),(0,a.j4)(p,{key:0,name:"add-o",onClick:e[0]||(e[0]=t=>n.addClick(n.item.id))})):((0,a.wg)(),(0,a.j4)(k,{key:1,modelValue:n.item.num,"onUpdate:modelValue":e[1]||(e[1]=t=>n.item.num=t),min:1,name:n.item.id,onChange:n.onChange},null,8,["modelValue","name","onChange"]))])]),(0,a._)("div",r,"￥"+(0,i.zw)(n.item.price),1)])}var m={props:["item","showAdd","addClick","onChange","showCheckbox"]},v=n(89);const f=(0,v.Z)(m,[["render",u],["__scopeId","data-v-20f06d48"]]);var p=f},6852:function(t,e,n){n.d(e,{Z:function(){return f}});var a=n(3396),i=n(7139);const o={class:"header"};function c(t,e,n,c,l,s){const d=(0,a.up)("van-icon");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(d,{name:"arrow-left",class:"icon",onClick:c.toBack},null,8,["onClick"]),(0,a._)("div",null,(0,i.zw)(n.title),1),n.edit?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"edit",onClick:e[0]||(e[0]=(...t)=>c.editClick&&c.editClick(...t))},(0,i.zw)(c.store.state.edit?"編輯":"完成"),1)):(0,a.kq)("",!0)])}n(6743);var l=n(4691),s=n(678),d=n(8598),r=n(65),u={props:["title","edit"],setup(){const t=(0,r.oR)(),e=(0,s.tv)(),n=()=>{e.back()},a=()=>{t.state.cartList.length?(t.commit("EDIT"),d.Z.emit("edit")):l.Z.fail("購物車空空如也")};return{toBack:n,editClick:a,store:t}}},m=n(89);const v=(0,m.Z)(u,[["render",c],["__scopeId","data-v-ffabb4a8"]]);var f=v},1023:function(t,e,n){n.r(e),n.d(e,{default:function(){return j}});var a=n(3396),i=n(7139);const o=t=>((0,a.dD)("data-v-02fd5607"),t=t(),(0,a.Cn)(),t),c={class:"storeDetails"},l={class:"content"},s=o((()=>(0,a._)("div",{class:"img"},null,-1))),d={class:"foodClassify"},r={class:"name"},u=["src"],m={class:"classify"};function v(t,e,n,o,v,f){const p=(0,a.up)("Header"),k=(0,a.up)("FoodList"),C=(0,a.up)("van-tab"),g=(0,a.up)("van-tabs"),h=(0,a.up)("van-action-bar-icon"),w=(0,a.up)("van-action-bar-button"),_=(0,a.up)("van-action-bar");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a.Wm)(p,{title:"店鋪"}),(0,a._)("div",l,[s,(0,a._)("div",d,[(0,a._)("div",r,[(0,a.Uk)((0,i.zw)(t.title)+" ",1),(0,a._)("img",{src:t.img,class:"store_img",alt:""},null,8,u)]),(0,a._)("div",m,[(0,a.Wm)(g,{color:"#ffc400"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.storeData,((t,e)=>((0,a.wg)(),(0,a.j4)(C,{title:t.name,key:e},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{index:e,foodData:t.data},null,8,["index","foodData"])])),_:2},1032,["title"])))),128))])),_:1})])])]),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{icon:"chat-o",text:"客服",onClick:o.service},null,8,["onClick"]),(0,a.Wm)(h,{icon:"cart-o",text:"購物車",badge:o.store.state.cartList.length,onClick:o.toCart},null,8,["badge","onClick"]),(0,a.Wm)(w,{type:"warning",text:"加入購物車",onClick:o.handleAddCart},null,8,["onClick"]),(0,a.Wm)(w,{type:"danger",text:"立即購買",onClick:o.clickBuy},null,8,["onClick"])])),_:1})])}n(6743);var f=n(4691),p=n(6852),k=n(4870);const C={key:0,class:"food_list"},g={key:1};function h(t,e,n,o,c,l){const s=(0,a.up)("FoodAdd"),d=(0,a.up)("van-tree-select");return 0===n.index?((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(d,{height:"88vw",items:t.items,"v-model":t.active,onClickNav:o.navClick},{content:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.subItem,((t,e)=>((0,a.wg)(),(0,a.iD)("div",{class:"item_bg",key:e},[(0,a.Wm)(s,{item:t,showAdd:!0,addClick:o.addClick,onChange:o.onChange},null,8,["item","addClick","onChange"])])))),128))])),_:1},8,["items","v-model","onClickNav"])])):((0,a.wg)(),(0,a.iD)("div",g,(0,i.zw)(n.foodData.content),1))}var w=n(4893),_={props:["index","foodData"],components:{FoodAdd:w.Z},setup(t){let e=(0,k.qj)({active:0,items:[],subItem:[]});const n=()=>{let n=[];t.foodData?.items?.map(((t,a)=>{n.push({text:t.text}),e.active===a&&(e.subItem=t.children)})),e.items=n};n();const a=t=>{e.active=t,n()},i=t=>{e.subItem.forEach((e=>{e.id===t&&(e.add=!1,e.num+=1)}))},o=(t,n)=>{e.subItem.forEach((e=>{e.id===n.name&&(e.num=t)}))};return{...(0,k.BK)(e),navClick:a,addClick:i,onChange:o}}},b=n(89);const D=(0,b.Z)(_,[["render",h],["__scopeId","data-v-ee9bf664"]]);var y=D,x=n(65),Z=n(678),W=n(8809),I={components:{Header:p.Z,FoodList:y},setup(){const t=(0,x.oR)(),e=(0,Z.tv)(),n=(0,Z.yj)();let i=(0,k.qj)({storeData:[],title:"",img:""});const o=()=>{(0,W._)().then((t=>{200===t.status&&0===t.data.code&&t.data.data.forEach((t=>{console.log(n.query.title,t.title),t.title===n.query.title&&(i.title=t.title,i.img=t.img,i.storeData=t.storeData)}))}))};(0,a.bv)((()=>{o()}));const c=()=>{f.Z.fail("敬請期待...")},l=()=>{e.push("./cart")},s=e=>{let n=[];i.storeData.forEach((t=>{t.data.items?.forEach((t=>{t.children.forEach((t=>{t.num>0&&n.push(t)}))}))})),0!==n.length?(t.commit("ADDCART",n),"buy"===e&&l()):(0,f.Z)("請選擇商品")},d=()=>{s("buy")};return{...(0,k.BK)(i),service:c,handleAddCart:s,store:t,clickBuy:d,toCart:l}}};const A=(0,b.Z)(I,[["render",v],["__scopeId","data-v-02fd5607"]]);var j=A}}]);
//# sourceMappingURL=449.d2bf4a64.js.map